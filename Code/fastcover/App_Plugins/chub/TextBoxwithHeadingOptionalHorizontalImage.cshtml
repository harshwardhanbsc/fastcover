@inherits Umbraco.Web.Mvc.UmbracoViewPage<dynamic>
@{
    String smallimg = (Model.value != null && Model.value.images != null && Model.value.images.smallimage != null) ? Model.value.images.smallimage.image : null;
    String img1 = (Model.value != null && Model.value.images != null && Model.value.images.image1 != null) ? Model.value.images.image1.image : null;
    String img2 = (Model.value != null && Model.value.images != null && Model.value.images.image2 != null) ? Model.value.images.image2.image : null;
    String img3 = (Model.value != null && Model.value.images != null && Model.value.images.image3 != null) ? Model.value.images.image3.image : null;
    String img4 = (Model.value != null && Model.value.images != null && Model.value.images.image4 != null) ? Model.value.images.image4.image : null;
    String img5 = (Model.value != null && Model.value.images != null && Model.value.images.image5 != null) ? Model.value.images.image5.image : null;
    String img6 = (Model.value != null && Model.value.images != null && Model.value.images.image6 != null) ? Model.value.images.image6.image : null;
    String smallimgAltText = (Model.value != null && Model.value.images != null && Model.value.images.smallimage != null) ? Model.value.images.smallimage.altText : null;
    String img1AltText = (Model.value != null && Model.value.images != null && Model.value.images.image1 != null) ? Model.value.images.image1.altText : null;
    String img2AltText = (Model.value != null && Model.value.images != null && Model.value.images.image2 != null) ? Model.value.images.image2.altText : null;
    String img3AltText = (Model.value != null && Model.value.images != null && Model.value.images.image3 != null) ? Model.value.images.image3.altText : null;
    String img4AltText = (Model.value != null && Model.value.images != null && Model.value.images.image4 != null) ? Model.value.images.image4.altText : null;
    String img5AltText = (Model.value != null && Model.value.images != null && Model.value.images.image5 != null) ? Model.value.images.image5.altText : null;
    String img6AltText = (Model.value != null && Model.value.images != null && Model.value.images.image6 != null) ? Model.value.images.image6.altText : null;
    
    var images = new List<KeyValuePair<string, string>>();
    if (img1 != null)
    {
        images.Add(new KeyValuePair<string, string>(img1, img1AltText));
    }
    if (img2 != null)
    {
        images.Add(new KeyValuePair<string, string>(img2, img2AltText));
    }
    if (img3 != null)
    {
        images.Add(new KeyValuePair<string, string>(img3, img3AltText));
    }
    if (img4 != null)
    {
        images.Add(new KeyValuePair<string, string>(img4, img4AltText));
    }
    if (img5 != null)
    {
        images.Add(new KeyValuePair<string, string>(img5, img5AltText));
    }
    if (img6 != null)
    {
        images.Add(new KeyValuePair<string, string>(img6, img6AltText));
    }
    int i = images.Count(x => x.Key != null);
    double wid = (100 - (3.2 * (i - 1))) / i;
    string width = wid + "%";
    var displayul = "block";
    var imagealign = "left";
    if (i == 1)
    {
        displayul = "inline";
        imagealign = "center";
    }
}
<div class="t-box">
    <div class="title">
        @if (Model != null)
            {
                if (Model.value != null)
                {
                <h2>@Model.value.heading</h2>
            }
        }
        @if (smallimg != null)
            {
            <div class="mosqicon">
                <img src="@smallimg" alt="@smallimgAltText" />
            </div>
        }
    </div>
    <div class="clear"></div>
    <div class="mosqbdr">
        @if (Model != null)
            {
                if (Model.rteValue != null)
                {
                <div class="chrichtext">@Html.Raw(Model.rteValue)</div>
            }
        }
        @if (i != 0)
        {
            <div class="ul" style="display: @displayul;">
                @foreach (var img in images.Where(x => x.Key != null))
                {
                    if (i == 1)
                    {
                        <div class="li" style="width: @width; text-align: @imagealign;">
                            <img src="@img.Key" alt="@img.Value" />
                        </div>
                    }
                    else
                    {
                        <div class="li" style="width: @width;">
                            <img src="@img.Key" alt="@img.Value" />
                        </div>
                    }
                }
            </div>
        }
        <div class="clear"></div>
    </div>
</div>
